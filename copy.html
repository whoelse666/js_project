<!--
 * @Author: RONGWEI PENG
 * @Date: 2023-02-21 22:41:14
 * @LastEditors: Do not edit
 * @LastEditTime: 2023-02-21 22:46:40
 * @FilePath: /js_project/copy.html
-->
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <style>
    h3 {
      cursor: pointer;
      text-align: center;
    }
  </style>
  <body>
    <h3 onclick="myFun(this)">点我选择复制我的内容1111</h3>
    <h3 onclick="myFun(this)">点我选择复制我的内容2222</h3>
    <script src="copy.js"></script>
    <!--引入JS文件-->
    <script>
      function myFun(e) {
        copyText(selectText(e));
      }

      /**
       * 返回当前元素的文本内容
       * @parm {DOM} element 当前DOM元素
       */
      function selectText(element) {
        return element.innerText;
      }
      /**
       * @param {String} text 需要复制的内容
       * @return {Boolean} 复制成功:true或者复制失败:false  执行完函数后，按ctrl + v试试
       */
      function copyText(text) {
        var textareaC = document.createElement("textarea");
        textareaC.setAttribute("readonly", "readonly"); //设置只读属性防止手机上弹出软键盘
        textareaC.value = text;
        document.body.appendChild(textareaC); //将textarea添加为body子元素
        textareaC.select();
        var res = document.execCommand("copy");
        document.body.removeChild(textareaC); //移除DOM元素
        console.log("复制成功:"+res);
        alert("代码复制成功:"+element.innerText);
        return res;
      }
    </script>
  </body>
</html>
