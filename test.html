<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>drag 图片拖拽验证</title>
  </head>
  <body></body>
  <script>
    // function threeSum(nums) {
    //   if (nums == null) {
    //     return [];
    //   }
    //   let len = nums.length,
    //     arr = [];
    //   if (len < 3) {
    //     return arr;
    //   }
    //   nums.sort((a, b) => a - b);
    //   if (nums[0] > 0) return [];
    //   let index,
    //     helpMap = new Map();
    //   for (let i = 0; i < len; i++) {

    //     if (nums[i] > 0) break;
    //     let target = -nums[i];
    //     for (let j = i + 1; j < nums.length; j++) {
    //       index = helpMap.get(target - nums[j]);
    //       if (index !== undefined) {
    //         if ((target == 0 && nums[index] == 0) || (target == 0 && nums[j] == 0) || (nums[index] == 0 && nums[j] == 0)) {
    //           break;
    //         }
    //         arr.push([target, nums[index], nums[j]]);
    //       }
    //       helpMap.set(nums[j], j);
    //     }
    //   }
    //   console.log("arr", arr);
    //   return arr;
    // }

    // threeSum([-1, 0, 1, 2, -1, -4]);

    (function (nums, target) {
      if (nums == null || nums.length < 4) {
        return [];
      }
      const len = nums.length;
      const res = [];
      nums.sort((a, b) => a - b);

      for (let j = 0; j < len - 3; j++) {
        if (j > 0 && nums[j] === nums[j - 1]) continue;

        for (let i = j + 1; i < len - 2; i++) {
          // 去重1
          if (i > j + 1 && nums[i] === nums[i - 1]) continue;
          let left = i + 1,
            right = len - 1;
          console.log(j, left, right);

          while (left < right) {
            console.log("j,i,left,right", j, i, left, right);
            const sum = nums[j] + nums[i] + nums[left] + nums[right];
            if (sum === target) {
              res.push([nums[j], nums[i], nums[left], nums[right]]);
              while (left < right && nums[left] == nums[left + 1]) left++;
              while (left < right && nums[right] == nums[right - 1]) right--;
              left++;
              right--;
            } else if (sum < target) {
              left++;
            } else {
              right--;
            }
          }
        }
      }
      console.log("res", res);
      return res;
    })([0, 0, 0, 0], 0);
  </script>
</html>
